/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package kbt;

import javax.security.auth.login.LoginException;

import com.typesafe.config.Config;

import kbt.config.ConfigLoader;
import net.dv8tion.jda.api.JDA;
import net.dv8tion.jda.api.JDABuilder;

public class Main {

    public static JDA instance;

    private static final ConfigLoader configLoader = new ConfigLoader();

    public static final Config config = configLoader.coreConfig;

    public static void main(String[] args) {
        try {
            String token = config.getString("discordtoken");
            JDABuilder jdaBuilder = JDABuilder.createDefault(token);
            instance = jdaBuilder.build().awaitReady();
            configLoader.addGuilds(instance.getGuilds());
        } catch (LoginException | InterruptedException e) {
            e.printStackTrace();
        }

    }
}
